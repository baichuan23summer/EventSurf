<!DOCTYPE html>
<html>

<head>
  <title>EventSurf</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
      <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, <!DOCTYPE html>
<html>

<head>
  <title>EventSurf</title>
  <link rel="stylesheet" type="text/css" href="styles.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css" />
  <script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>
  <script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
  <title>SeminarSurf - Find and Host Seminars</title>
  <script src="script.js"></script>
</head>

<body>
  <header>
    <div class="header-container">
      <div class="title-section">
        <h1>SeminarSurf</h1>
      </div>
      <div class="action-section">
        <button id="signInButton" onclick="showPage('sign-in')">Sign In</button>
      </div>
    </div>
    <div class="spacer">
    </div>
    <nav>
      <a href="#" onclick="showPage('home')">Home</a>
      <a href="#" onclick="showPage('host-event')">Host Seminar</a>
      <a href="#" onclick="showPage('find-event')">Find Seminar</a>
      <a href="#" onclick="showPage('event-near-you')">Locate Seminar</a>
    </nav>
  </header>

  <!-- Login Page -->
  <section id="login" class="page" style="display: none;">
    <div class="login-container">
      <h2>Login to EventSurf</h2>
      <form id="loginForm">
        <input type="email" id="email" placeholder="Email Address" required>
        <input type="password" id="password" placeholder="Password" required>
        <button type="submit">Login</button>
      </form>
      <p>Don't have an account? <a href="#" onclick="showPage('register')">Register here</a></p>
    </div>
  </section>

  <!-- Register Page -->
  <section id="register" class="page" style="display: none;">
    <div class="register-container">
      <h2>Register</h2>
      <form id="registerForm">
        <input type="text" id="username" placeholder="Username" required>
        <input type="email" id="registerEmail" placeholder="Email Address" required>
        <input type="password" id="registerPassword" placeholder="Password" required>
        <input type="password" id="confirmPassword" placeholder="Confirm Password" required>
        <button type="submit">Register</button>
      </form>
      <p>Already have an account? <a href="#" onclick="showPage('login')">Login here</a></p>
    </div>
  </section>

  <main>
    <!-- Home Page -->
    <section id="home" class="page">
      <div class="home-container">
      <div class="hompageintro-left">
      <div class="hompageintro">
      <h2>Welcome to SeminarSurf</h2>
      <div></div>
      <p>Tired of tracking seminar and conference dates through countless long emails? SeminarSurf -- your ultimate resource for finding latest academic seminars, workshops
        , and conferences that fit your career goals is here! Navigate Knowledge, explore ideas, and surf your way into every opportunity to building your career.</p>
      </div>
      <div class="home-blocks">
          <a href="#" onclick="showPage('find-event')" class="home-block find-events">
            <h3>Find Seminars</h3>
          </a>
          <a href="#" onclick="showPage('host-event')" class="home-block host-events">
            <h3>Host Seminars</h3>
          </a>
      </div>
      </div>
        <div class="nav">
          <ul>
            <li>
              <img src="frontpagepic1.jpg" alt="Image 1">
              <div class="description">
                <p>Workshop: Working with Geospatial Data in R</p>
                <p>Time: 1:30pm to 4:30pm</p>
              </div>
            </li>
            <li>
              <img src="frontpagepic2.jpg" alt="Image 2">
              <div class="description">
                <p>Seminar: Research Computing</p>
                <p>Time: 12:00pm - 1:00pm</p>
              </div>
            </li>
            <li>
              <img src="frontpagepic3.jpg" alt="Image 3">
              <div class="description">
                <p>Designing Clinical Trial Workflows: Unleashing LLM and RAG</p>
                <p>Time: 10:00 AM - 10:50 AM</p>
              </div>
            </li>
            <!-- Repeat images for seamless scrolling -->
            <li>
              <img src="frontpagepic1.jpg" alt="Image 1">
              <div class="description">
                <p>Workshop: Working with Geospatial Data in R</p>
                <p>Time: 1:30pm to 4:30pm</p>
              </div>
            </li>
            <li>
              <img src="frontpagepic2.jpg" alt="Image 2">
              <div class="description">
                <p>Seminar: Research Computing</p>
                <p>Time: 12:00pm - 1:00pm</p>
              </div>
            </li>
            <li>
              <img src="frontpagepic3.jpg" alt="Image 3">
              <div class="description">
                <p>Designing Clinical Trial Workflows: Unleashing LLM and RAG</p>
                <p>Time: 10:00 AM - 10:50 AM</p>
              </div>
            </li>
          </ul>
        </div>
      </div> 
    </section>

    <!-- Host Event Page -->
    <section id="host-event" class="page" style="display:none;">
      <h2>Host a Seminar</h2>
      <p>Fill the form to create an event that will automatically appear in "Find Seminar". Generate a pdf of a sample email you can send to the UCSB event coordinator asking for permission.</p>
      <form id="eventForm">
        <input type="text" id="eventTitle" placeholder="Seminar Name" required>
        <input type="text" id="eventDate" placeholder="Seminar Date in MM/DD/YYYY)" required>
        <input type="text" id="eventTime" placeholder="Time (e.g., 8 AM - 10 AM)" required>
        <input type="text" id="eventVenue" placeholder="Location" required>
        <textarea id="eventDescription" placeholder="Describe Your Seminar" required></textarea>
        <input type="file" id="eventImage" accept="image/*">
        <button type="submit">Post Seminar</button>
        <button type="submit">Generate PDF Request</button>
      </form>
      <div id="pdfDownloadLink" style="display: none;">
      <p>Your PDF is ready! <a id="downloadLink" href="#">Download PDF</a></p>
    </div>
    </section>

    <!-- Find Event Page -->
    <section id="find-event" class="page" style="display:none;">
      <h2>Find Seminars</h2>
      <div id="eventPostsContainer">
        <!-- Dynamic event posts will be appended here -->
        <h3>Upload your preferences (PDF) to find recommended seminars to advance your academic skills:</h3>
        <input type="file" id="pdfUpload" accept="application/pdf">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script>
        <button onclick="processPdf()">Find Seminars</button>
        <ul class="event-list" id="eventList"></ul>
      </div>
    </section>

    <!-- Event Near You Page -->
    <section id="event-near-you" class="page" style="display:none;">
      <h2>Locate Seminar</h2>
      <p>Discover events happening near your location using the map below:</p>
      <div id="map-container">
        <div id="map"></div>
        <input type="text" id="addressInput" placeholder="Enter address of Seminar">
        <button onclick="searchAndGenerateMarker()">Generate Seminar Marker</button>
        <button onclick="generateCurrentLocation()">Generate Current Marker</button>
      </div>
    </section>

  </main>

  <footer>
    <p>&copy; 2025 SeminarSurf. </p>
    <p>SeminarSurf. Navigate Knowledge. Surf Ideas. </p>
  </footer>


  <script>
    // Map Initialization
    var map = L.map('map').setView([34.4140, -119.8489], 13);
    var markerGroup = L.layerGroup().addTo(map);
    var geocoder = L.Control.Geocoder.nominatim();
    var routingControl;
    var currentLocation;
    var destination;
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Â© OpenStreetMap contributors'
    }).addTo(map);
    // Function to generate a marker
    function generateMarker(location, popupText, isDestination = false) {
      map.setView(location, 15);
      var marker = L.marker(location).addTo(markerGroup).bindPopup(popupText).openPopup();
      if (isDestination) {
        destination = location;
      }
      generateRoute();
    }
    // Function to search and generate a marker
    function searchAndGenerateMarker() {
      var address = document.getElementById('addressInput').value;
      geocoder.geocode(address, function(results) {
        if (results && results.length > 0) {
          var location = results[0].center;
          generateMarker(location, "Destination", true);
        } else {
          console.error("Unable to geocode address");
        }
      });
    }
    // Function to generate a marker for the current location
    function generateCurrentLocation() {
      navigator.geolocation.getCurrentPosition(function(position) {
        currentLocation = [position.coords.latitude, position.coords.longitude];
        generateMarker(currentLocation, "Your Current Location");
      });
    }
    // Function to generate a route
    function generateRoute() {
      if (currentLocation && destination) {
        if (routingControl) {
          map.removeControl(routingControl);
        }
        routingControl = L.Routing.control({
          waypoints: [
            L.latLng(currentLocation),
            L.latLng(destination)
          ],
          routeWhileDragging: true,
          geocoder: L.Control.Geocoder.nominatim(),
          showAlternatives: true,
          altLineOptions: {
            styles: [{
                color: 'black',
                opacity: 0.15,
                weight: 9
              },
              {
                color: 'black',
                opacity: 0.8,
                weight: 6
              },
              {
                color: 'blue',
                opacity: 0.5,
                weight: 2
              }
            ]
          }
        }).addTo(map);
      }
    }
    // Function to show a specific page
    function showPage(pageId) {
      var pages = document.querySelectorAll('.page');
      pages.forEach(function(page) {
        page.style.display = 'none';
      });
      document.getElementById(pageId).style.display = 'block';
    }
  </script>
</body>

</html>
